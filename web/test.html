<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>

    customary-tutorials tests

</title></head><body>

<h1>customary-tutorials üë©‚Äçüî¨üî¨ tests</h1>

<template data-customary-name="test-runner">
<button autofocus>Run tests</button>
</template>

<test-runner></test-runner>

<div id="mocha"></div>

<script type="importmap">
    {
        "imports": {
            "chai": "./../node_modules/chai/chai.js",
            "mocha": "./../node_modules/mocha/mocha.js",
            "mocha.css": "./../node_modules/mocha/mocha.css",
            "#customary-tutorials/": "./",
            "#customary/": "./../node_modules/customary/web/_script/",
            "lit-for-customary": "../../../node_modules/customary/node_modules/lit-for-customary/.dist/bundled/lit-for-customary.mjs"
        }
    }
</script>
<script type="module">
    import {adoptCSSStylesheets} from "#customary/cssstylesheet/CSSStyleSheetAdopter.js";
    await adoptCSSStylesheets(import.meta.resolve('mocha.css'));
</script>
<script type="module">
    // https://medium.com/dailyjs/running-mocha-tests-as-native-es6-modules-in-a-browser-882373f2ecb0
    import 'mocha';
    mocha.setup({ui: 'bdd', checkLeaks: true});
    mocha.cleanReferencesAfterRun(false);
</script>
<script type="module">
    import {CustomaryTutorialsData} from '#customary-tutorials/data/CustomaryTutorialsData.js';
    async function connected() {
        const data = await CustomaryTutorialsData.loadData();
        for (const test of data.tests) {
            await import(`./${test}`);
        }
        const params = new URLSearchParams(window.location.search);
        if (params.has("run")) {
            run_unit_tests();
        }
    }
    function run_unit_tests() {
        document.getElementById('mocha').replaceChildren();
        mocha.run();
    }
    globalThis['customary:test-runner'] = {
        hooks: {
            lifecycle: {connected: connected},
            events: {'button': run_unit_tests}
        }
    };
</script>
<script type="module">import '#customary/now.js';</script>

</body>

</html>
