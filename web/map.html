<!doctype html>

<customary-cookbook></customary-cookbook>

<template data-customary-name="customary-cookbook">
    <div>
        ${map(state, value => html`
        <p><a target="_blank" href="${value.file}">${value.file}</a></p>
        `)}
    </div>
</template>

<p><a href="./test.html" target="_blank">Run the Unit Tests</a></p>

<script type="importmap">
    {
        "imports": {
            "#customary-cookbook/": "./",
            "#customary/fetch/": "./../node_modules/customary/web/_script/fetch/",
            "#customary-now": "./../node_modules/customary/web/_script/now.js",
            "#customary/": "./../node_modules/customary/web/_script/",
            "lit-for-customary": "./../node_modules/customary/node_modules/lit-for-customary/.dist/bundled/lit-for-customary.mjs"
        }
    }
</script>

<script type="module">
    import {CustomaryCookbookData} from '#customary-cookbook/data/CustomaryCookbookData.js';
    async function loadData(el) {
        const data = await CustomaryCookbookData.loadData();
        const state = data.pages.map(file => ({file}));
        el.setState(state);
    }
    globalThis['customary:customary-cookbook'] = {hooks: {lifecycle: {connected: loadData}}};
</script>
<script type="module">import '#customary-now';</script>
