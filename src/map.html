<!doctype html>
<html lang="en" xmlns:customary="https://customaryjs.github.io/schema">

<customary-cookbook></customary-cookbook>

<template data-customary-name="customary-cookbook" data-customary-attributes="pages">
    <div>
        <customary:for items="this.pages">
            <p><a target="_blank" href="${value}">${value}</a></p>
        </customary:for>
    </div>
</template>

<p><a href="./test.html" target="_blank">Run the Unit Tests</a></p>

<script type="importmap">
    {
        "imports": {
            "#customary-cookbook/": "./",
            "#customary": "./../node_modules/customary/src/now.js",
            "#customary/": "./../node_modules/customary/src/",
            "#customary/lit": "./../node_modules/customary/.dist/bundled/customary-library.mjs"
        }
    }
</script>

<script type="module">
    import {CustomaryCookbookIndexLoader} from '#customary-cookbook/data/CustomaryCookbookIndexLoader.js';
    const indexPromise = CustomaryCookbookIndexLoader.loadIndex();
    globalThis['customary:customary-cookbook'] = {
        hooks: {
            lifecycle: {
                connected: async el => el.pages = (await indexPromise).pages
            }
        }
    };
</script>
<script type="module">import '#customary';</script>
</html>