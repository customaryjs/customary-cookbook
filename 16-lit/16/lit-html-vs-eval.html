<!DOCTYPE html>

<body>

<lit-html-vs-eval></lit-html-vs-eval>

<script type="importmap">{"imports": {
    "#customary": "../../_dependencies/customary/customary.mjs"
}}</script>
<script type="module">
//    
import {LitElement, html, when} from '#customary/lit';
import {reuse_immutable_TemplateStringsArray} from "#customary/render/reuse_immutable_TemplateStringsArray.js";

class LitHtmlVsEvalElement extends LitElement {
    static properties = {
        str: {},
    };

    constructor() {
        super();
        this.str = 'must... stay... focused!';
    }

    render() {
        const element = this;
        function _(template) {
            reuse_immutable_TemplateStringsArray(element, template);
            return template;
        }
        globalThis._ = _;

        const a =          html`${when(false, undefined, () =>   html`${this.str}<input .value=${this.str} @input=${this.ev}>` )}`;
        const b = eval('_(html\`${when(false, undefined, () => _(html`${this.str}<input .value=${this.str} @input=${this.ev}>`))}\`)');

        return _(html`
            <pre>html :)</pre>
            ${a}
            <hr>
            <pre>eval :)</pre>
            ${b}
            <hr/>
        `);
    }

    ev(e) {
        this.str = e.target.value;
    }
}

customElements.define('lit-html-vs-eval', LitHtmlVsEvalElement);
//
</script>

</body>
