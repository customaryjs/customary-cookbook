<title>Attributes ~ from options ~ Customary Cookbook</title>

<h1>Customary Attributes</h1>

<p>~ from options ~</p><br/>

<attributes-options task="open"></attributes-options>
<attributes-options task="to do"></attributes-options>
<attributes-options task="doing"></attributes-options>
<attributes-options task="done" done></attributes-options>

<template data-customary-name="attributes-options">
    <h1 class="${this.color}">
        <input type="checkbox" ?checked="${this.done}"> ${this.task}</input>
    </h1>
    <style>.done {color: green}</style>
</template>

<script type="importmap">{"imports": {
    "#customary-now": "../../../node_modules/customary/web/_script/now.js",
    "#customary/": "../../../node_modules/customary/web/_script/",
    "lit-for-customary": "../../../node_modules/customary/node_modules/lit-for-customary/.dist/bundled/lit-for-customary.mjs"
}}</script>
<script type="module">
    /**
     * @type {CustomaryOptions}
     */
    globalThis['customary:attributes-options'] = {
        hooks: {
            attributes: {
                'task': {},
                'done': {type: Boolean},
                'color': {state: true}
            },
            lifecycle: {
                willUpdate: el => el.color = el.done ? 'done' : ''
            },
            events: [
                {
                    selector: "input[type='checkbox']",
                    type: 'change',
                    listener: el => toggle(el)
                }
            ],
        }
    };
    function toggle(el) {
        if (el.done) {
            el.removeAttribute('done');
        } else {
            el.setAttribute('done', 'present');
        }
    }
</script>
<script type="module">import '#customary-now';</script>
